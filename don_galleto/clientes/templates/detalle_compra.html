{% extends 'base.html' %}
{% load static %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.28/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.28/dist/sweetalert2.min.js"></script>

{% block content %}
{% if messages %}
<div class="alert-container">
  {% for message in messages %}
  <div class="alert alert-{{ message.tags }}">
    {{ message }}
  </div>
  {% endfor %}
</div>
{% endif %}

<link rel="stylesheet" href="/static/css/detalle.css">

<div class="detalle-compra-container">
  <h4>Detalle de Compra</h4>
  <form method="post" action="{% url 'finalizar_compra' %}">
    {% csrf_token %}
    <ul class="detalle-list">
      {% for item in carrito %}
      <li>
        <span>{{ item.nombre }} - ${{ item.precio_venta }} (x{{ item.cantidad }})</span>
        <span>{{ item.descripcion }}</span>
        <div class="cantidad-control">
          <button type="button" class="btn-decrementar" data-id="{{ item.id }}">-</button>
          <input type="number" name="cantidad_{{ item.id }}" class="cantidad-input" value="{{ item.cantidad }}" min="1"
            readonly>
          <button type="button" class="btn-incrementar" data-id="{{ item.id }}">+</button>
        </div>
      </li>
      {% endfor %}
    </ul>
    <div class="total-compra">Total: ${{ total }}</div>
    <button type="submit" class="btn-finalizar">Finalizar Compra</button>
  </form>
</div>

<script src="/static/js/detalle.js"></script>
{% endblock %}